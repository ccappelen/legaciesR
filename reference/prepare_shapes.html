<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare shapefiles — prepare_shapes • legaciesr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare shapefiles — prepare_shapes"><meta name="description" content="The function prepares data for further processing with other functions in the `legaciesr' package,
e.g., expands rows for maps coded with a range (rather than specific year), excludes certain maps, etc."><meta property="og:description" content="The function prepares data for further processing with other functions in the `legaciesr' package,
e.g., expands rows for maps coded with a range (rather than specific year), excludes certain maps, etc."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">legaciesr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ccappelen/legaciesR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare shapefiles</h1>
      <small class="dont-index">Source: <a href="https://github.com/ccappelen/legaciesR/blob/main/R/prepare_shapes.R" class="external-link"><code>R/prepare_shapes.R</code></a></small>
      <div class="d-none name"><code>prepare_shapes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function prepares data for further processing with other functions in the `legaciesr' package,
e.g., expands rows for maps coded with a range (rather than specific year), excludes certain maps, etc.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_shapes</span><span class="op">(</span></span>
<span>  <span class="va">shp</span>,</span>
<span>  <span class="va">state_data</span>,</span>
<span>  <span class="va">id_var</span>,</span>
<span>  <span class="va">period_var</span>,</span>
<span>  <span class="va">range_min</span>,</span>
<span>  <span class="va">range_max</span>,</span>
<span>  fix_year <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  year_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  expand_range <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  match_capitals <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  exclude_hierarchy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"tributary"</span>, <span class="st">"dependency"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  exclude_core <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  exclude_incomplete <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  exclude_sovereign <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  margin_sovereign <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  crop_to_land <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-shp">shp<a class="anchor" aria-label="anchor" href="#arg-shp"></a></dt>
<dd><p>sf dataframe</p></dd>


<dt id="arg-state-data">state_data<a class="anchor" aria-label="anchor" href="#arg-state-data"></a></dt>
<dd><p>dataframe with state ID data</p></dd>


<dt id="arg-id-var">id_var<a class="anchor" aria-label="anchor" href="#arg-id-var"></a></dt>
<dd><p>ID variable, must be the same in both <code>shp</code> and <code>state_data</code></p></dd>


<dt id="arg-period-var">period_var<a class="anchor" aria-label="anchor" href="#arg-period-var"></a></dt>
<dd><p>Year variable, must be the same in both <code>shp</code> and <code>state_data</code></p></dd>


<dt id="arg-range-min">range_min<a class="anchor" aria-label="anchor" href="#arg-range-min"></a></dt>
<dd><p>Name of variable for lower year interval</p></dd>


<dt id="arg-range-max">range_max<a class="anchor" aria-label="anchor" href="#arg-range-max"></a></dt>
<dd><p>Name of variable for upper year interval</p></dd>


<dt id="arg-fix-year">fix_year<a class="anchor" aria-label="anchor" href="#arg-fix-year"></a></dt>
<dd><p>Logical, whether to fix three-digit years. Default is <code>TRUE</code>. See details.</p></dd>


<dt id="arg-year-na">year_na<a class="anchor" aria-label="anchor" href="#arg-year-na"></a></dt>
<dd><p>Logical, whether to exclude maps with no year indication (exact or range)</p></dd>


<dt id="arg-expand-range">expand_range<a class="anchor" aria-label="anchor" href="#arg-expand-range"></a></dt>
<dd><p>Logical, whether to expand rows for maps with year interval, default is <code>TRUE.</code> See details.</p></dd>


<dt id="arg-match-capitals">match_capitals<a class="anchor" aria-label="anchor" href="#arg-match-capitals"></a></dt>
<dd><p>Logical, whether to add information on capital cities to the <code>shp</code> data. Default is <code>TRUE</code>. See details.</p></dd>


<dt id="arg-exclude-hierarchy">exclude_hierarchy<a class="anchor" aria-label="anchor" href="#arg-exclude-hierarchy"></a></dt>
<dd><p>Character vector, whether to exclude maps for states that are subordinated (tributary or dependency). <code>none</code> (default)
will keep all maps regardless of hierarchy status, <code>tributary</code> will exclude tributary states (<code>hierarchy == 1</code>), <code>dependency</code> will exclude
dependencies (<code>hierarchy == 2</code>), and <code>all</code> will exclude both tributaries and dependencies. See also <code>combine_hierarchy</code>.</p></dd>


<dt id="arg-exclude-core">exclude_core<a class="anchor" aria-label="anchor" href="#arg-exclude-core"></a></dt>
<dd><p>Exclude maps coded as core (i.e., include only the complete shape of both core and periphery).
Default is <code>TRUE</code>.</p></dd>


<dt id="arg-exclude-incomplete">exclude_incomplete<a class="anchor" aria-label="anchor" href="#arg-exclude-incomplete"></a></dt>
<dd><p>Exclude maps with incomplete borders. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-exclude-sovereign">exclude_sovereign<a class="anchor" aria-label="anchor" href="#arg-exclude-sovereign"></a></dt>
<dd><p>Exclude maps for states that are not sovereign at the time of the map. If <code>exclude_sovereign</code> is not <code>none</code>, then sovereign spells are defined by the same hierarchy rule.
Otherwise, all polity-years in the ID data will be included as sovereign spells. See details.</p></dd>


<dt id="arg-margin-sovereign">margin_sovereign<a class="anchor" aria-label="anchor" href="#arg-margin-sovereign"></a></dt>
<dd><p>Number of years before or after a state is sovereign that a map is still included (if <code>exclude_sovereign</code> is <code>TRUE</code>). Default is 5 years.</p></dd>


<dt id="arg-crop-to-land">crop_to_land<a class="anchor" aria-label="anchor" href="#arg-crop-to-land"></a></dt>
<dd><p>Logical, whether to crop geometries to land (default is <code>TRUE</code>)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An sf dataframe.
Further details:</p>
<dl><dt><code>expand_year</code></dt>
<dd><p>Expands rows for maps with interval range rather than specific year. The lower and
upper limits are always retained. In between the limits, rows are only in ten-year interval.</p></dd>

<dt><code>match_capitals</code></dt>
<dd><p>Capital coordinates are stored as separate geometry. If there are multiple capitals
in the same year, all of them withh be included. The capital names will then be separated by semicolon.</p></dd>

<dt><code>exclude_sovereign</code></dt>
<dd><p>Excludes maps for states that are not sovereign. If the year of the map is within
5 years of a state being sovereign, the map is still included.</p></dd>

</dl></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christoffer Cappelen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

