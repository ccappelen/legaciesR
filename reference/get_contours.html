<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get Contour Polygons Across Groups — get_contours • legaciesr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Contour Polygons Across Groups — get_contours"><meta name="description" content="This function creates contour polygons across multiple groups, either by group alone or
in combination with a time column."><meta property="og:description" content="This function creates contour polygons across multiple groups, either by group alone or
in combination with a time column."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">legaciesr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ccappelen/legaciesR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get Contour Polygons Across Groups</h1>
      <small class="dont-index">Source: <a href="https://github.com/ccappelen/legaciesR/blob/main/R/get_contours.R" class="external-link"><code>R/get_contours.R</code></a></small>
      <div class="d-none name"><code>get_contours.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates contour polygons across multiple groups, either by group alone or
in combination with a time column.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_contours</span><span class="op">(</span></span>
<span>  <span class="va">shp</span>,</span>
<span>  <span class="va">id_var</span>,</span>
<span>  by_period <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">period_var</span>,</span>
<span>  cuts <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  include_higher <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nmap_threshold <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  invalid_geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"stop"</span>, <span class="st">"fix"</span>, <span class="st">"exclude"</span><span class="op">)</span>,</span>
<span>  smoothing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  returnList <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">ncores</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-shp">shp<a class="anchor" aria-label="anchor" href="#arg-shp"></a></dt>
<dd><p>An sf dataframe containing all geometries (polygons).</p></dd>


<dt id="arg-id-var">id_var<a class="anchor" aria-label="anchor" href="#arg-id-var"></a></dt>
<dd><p>Name of the grouping variable.</p></dd>


<dt id="arg-by-period">by_period<a class="anchor" aria-label="anchor" href="#arg-by-period"></a></dt>
<dd><p>Logical, indicating if shapes should be divided into groups by time in addition to IDs.
Default is <code>FALSE.</code></p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>Scalar or vector indicating the intervals to group by. If <code>NULL</code> (default), the
intervals will automatically be set to 20 (years) and include the full range (i.e. <code>seq(min, max, 20)</code>).
For user specification, the value can be either a scalar, indicating the length of intervals
(in which case the full range is used), or a vector specifying the exact breaks, including both the
start of the first interval and end of the last interval.</p></dd>


<dt id="arg-period-var">period_var<a class="anchor" aria-label="anchor" href="#arg-period-var"></a></dt>
<dd><p>Name of the period variable to be used for time grouping.
This argument is necessary if <code>by_period</code> is <code>TRUE.</code></p></dd>


<dt id="arg-cuts">cuts<a class="anchor" aria-label="anchor" href="#arg-cuts"></a></dt>
<dd><p>Integer of length 1 specifying the number of (equally spaced) contour polygons to be returned.
For example, if <code>cuts = 10</code> the function will return 10 polygons representing the 10 deciles (0-0.1, 0.1-0.2, ...).</p></dd>


<dt id="arg-include-higher">include_higher<a class="anchor" aria-label="anchor" href="#arg-include-higher"></a></dt>
<dd><p>logical, whether the contour polygons should include percentiles above current interval.
If TRUE (default), the 50 % polygon will include all areas covered by at least 50 % of the shapes
(and not just within the specified interval, e.g., 0.75-1, 0.50-1, 0.25-1...). If FALSE, the polygon will include only areas
within the specified interval (e.g., 0.75-1, 0.50-0.75, 0.25-0.50...).</p></dd>


<dt id="arg-nmap-threshold">nmap_threshold<a class="anchor" aria-label="anchor" href="#arg-nmap-threshold"></a></dt>
<dd><p>Integer, indicating the number of shapes required within each group. Default is 5.</p></dd>


<dt id="arg-invalid-geom">invalid_geom<a class="anchor" aria-label="anchor" href="#arg-invalid-geom"></a></dt>
<dd><p>Character, how to handle invalid geometries. If <code>"stop"</code>, returns an error
if there are invalid geometries; if <code>"exclude"</code>, invalid geometries will be removed before
calculating contours; if <code>"fix"</code>, invalid geometries will be rebuilt using <a href="fix_invalid.html">fix_invalid</a>.
It is recommended to check for invalid geometries and run <a href="fix_invalid.html">fix_invalid</a> separately.</p></dd>


<dt id="arg-smoothing">smoothing<a class="anchor" aria-label="anchor" href="#arg-smoothing"></a></dt>
<dd><p>Logical, whether to apply smoothing after polygonizing the raster. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-returnlist">returnList<a class="anchor" aria-label="anchor" href="#arg-returnlist"></a></dt>
<dd><p>Logical, whether to return a list of geometries by group.
Default is to return an sf dataframe containing all geometries.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Logical, whether to show a progress bar.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Logical, whether to use parallel processing with <code>ncores</code> number of cores.
See details below.</p></dd>


<dt id="arg-ncores">ncores<a class="anchor" aria-label="anchor" href="#arg-ncores"></a></dt>
<dd><p>Integer, the number of cores to use for parallel processing. Default is all available cores minus 1.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <a href="contour_polygons.html">contour_polygons</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns either an sf dataframe (default) or a list of sf dataframes (one list item per group).</p>
    </div>
    <div class="section level2">
    <h2 id="support-for-parallel-processing">Support for parallel processing<a class="anchor" aria-label="anchor" href="#support-for-parallel-processing"></a></h2>


<p>Parallel processing is is implemented using the <a href="https://future.futureverse.org/reference/future.html" class="external-link">future::future</a> framework. There are two ways
of running jobs in parallel: <code>multicore</code> which uses 'forking' to run multiple jobs in parallel with
shared memory and <code>multisession</code> which launches a set of background R sessions. 'Forking' can be faster
than multisession because of the larger overhead associated with copying the active environment to
each background R session (whereas forking processes shares memory). However, 'forking' is not
supported on Windows platforms and is considered unstable when running from within RStudio
(on both Windows and Unix systems such as MacOS). The function will automatically determine
whether <code>multicore</code> is supported by the platform and choose the appropriate plan.</p>
<p>The greater overhead associated with <code>multisession</code> is primarily during the first parallel
run in a given R session (since the background R sessions stays available for additional
parallel jobs). It is possible to define a <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code> in the global environment,
which will minimize overhead in subsequent parallel jobs (apart from the first). The function will
automatically detect if a <code>multisession</code> plan has been set globally and, thus, will not close
background sessions after running.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christoffer Cappelen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

